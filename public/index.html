<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sarah AI Receptionist - Premium Dashboard</title>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- External CSS -->
    <link rel="stylesheet" href="dashboard.css">
    <!-- Vapi Web SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@vapi-ai/web/dist/vapi.min.js"></script>

    <!-- Socket.IO (Load First) -->
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <!-- Dashboard Logic (Load Second with defer) -->
    <script src="dashboard.js" defer></script>
</head>
<body>
    <!-- Animated Background -->
    <div class="animated-bg">
        <div class="gradient-bg"></div>
        <div class="floating-shapes">
            <div class="shape shape-1"></div>
            <div class="shape shape-2"></div>
            <div class="shape shape-3"></div>
        </div>
    </div>

    <div class="dashboard">
        <!-- Header -->
        <div class="header card-hover">
            <div class="header-left">
                <div class="avatar-container">
                    <div class="avatar">ü§ñ</div>
                    <div class="avatar-glow"></div>
                </div>
                <div class="header-info">
                    <h1>Sarah AI Receptionist</h1>
                    <p>Intelligent Virtual Assistant</p>
                </div>
            </div>
            <div class="status-badge" id="status">
                <div class="status-dot"></div>
                <span>Connecting...</span>
            </div>
        </div>

        <!-- Stats Grid -->
        <div class="stats-grid">
            <div class="stat-card card-hover">
                <div class="stat-icon">üìû</div>
                <h3>Total Conversations</h3>
                <div class="value" id="totalConversations">0</div>
                <div class="trend">‚Üë Active session</div>
            </div>
            <div class="stat-card card-hover">
                <div class="stat-icon">üí¨</div>
                <h3>Messages Today</h3>
                <div class="value" id="messagesCount">0</div>
                <div class="trend">Real-time updates</div>
            </div>
            <div class="stat-card card-hover">
                <div class="stat-icon">‚ö°</div>
                <h3>Response Time</h3>
                <div class="value" id="responseTime">~2s</div>
                <div class="trend">‚Üë 15% faster</div>
            </div>
            <div class="stat-card card-hover">
                <div class="stat-icon">‚≠ê</div>
                <h3>Satisfaction</h3>
                <div class="value">98%</div>
                <div class="trend">‚Üë Excellent</div>
            </div>
            <!-- CORRECTED Voice Activity Card -->
            <div class="stat-card card-hover" id="voiceWaveCard">
                <div class="stat-icon">üåä</div>
                <h3>Voice Activity</h3>
                <div class="voice-waveform-container">
                    <div class="voice-waveform" id="voiceWaveform" style="display: none;">
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                        <div class="wave"></div>
                    </div>
                    <div class="voice-status" id="voiceStatus">Idle</div>
                </div>
            </div>
        </div>

        <!-- Chat Container -->
        <div class="chat-container">
            <div class="chat-header card-hover">
                <div class="chat-title">üí¨ Live Conversation</div>
                <div class="chat-actions">
                    <button class="action-btn btn-hover" onclick="showHelp()">‚ùì Help</button>
                    <button class="action-btn btn-hover" onclick="clearTranscript()">üóëÔ∏è Clear</button>
                    <button class="action-btn btn-hover" onclick="exportTranscript()">üì• Export</button>
                </div>
            </div>
            <!-- Vapi Status Section -->
            <div class="vapi-status" id="vapiStatus">
                <div style="margin-bottom: 12px;">
                    <span class="ai-indicator" id="aiIndicator">
                        üé§ Ready to call
                    </span>
                </div>
                <div class="vapi-volume-indicator">
                    <div class="vapi-volume-bar" id="volumeBar"></div>
                </div>
            </div>
            <!-- Transcript Area -->
            <div class="transcript" id="transcript">
                <div class="empty-state">
                    <div class="empty-state-icon">üí¨</div>
                    <h3>No conversations yet</h3>
                    <p>Start a call to begin...</p>
                </div>
            </div>
            <!-- Typing Indicator -->
            <div class="typing-indicator" id="typingIndicator">
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            </div>
            <!-- Scroll to Bottom Button -->
            <button class="scroll-to-bottom btn-pop" id="scrollBtn" onclick="scrollToBottom()">‚Üì</button>
        </div>
    </div>

    <!-- Smooth Scroll for UX -->
    <style>
        html { scroll-behavior: smooth; }
    </style>

    <!-- Vapi Web Widget (Load Last - after all DOM elements and scripts) -->
    <script src="https://cdn.jsdelivr.net/gh/VapiAI/html-script-tag@latest/dist/assets/index.js" defer></script>
</body>
</html>
